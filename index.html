<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Roman.io</title>
<style>
    body, html {
        margin: 0;
        padding: 0;
        width: 100%;
        height: 100%;
        overflow: hidden;
        font-family: Arial, sans-serif;
        background-color: #f0f0f0;
    }
    canvas {
        display: block;
    }
    #mainMenu {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(255, 255, 255, 0.9);
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
    }
    #mainMenu h1 {
        font-size: 48px;
        color: #333;
        margin-bottom: 20px;
    }
    #mainMenu button {
        padding: 10px 20px;
        font-size: 24px;
        border: none;
        background-color: #4CAF50;
        color: white;
        cursor: pointer;
        transition: background-color 0.3s;
        margin-bottom: 10px;
    }
    #mainMenu button:hover {
        background-color: #45a049;
    }
    #score {
        position: absolute;
        bottom: 10px;
        right: 10px;
        font-size: 18px;
        color: #333;
    }
    #clickerMenu {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(255, 255, 255, 0.9);
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
    }
    #clickerMenu img {
        width: 100px;
        height: 100px;
        cursor: pointer;
    }
    #clickerMenu #clickerCounter {
        font-size: 24px;
        margin-bottom: 20px;
    }
    #backButton {
        position: absolute;
        top: 10px;
        left: 10px;
        font-size: 24px;
        cursor: pointer;
    }
    #shopMenu {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(255, 255, 255, 0.9);
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        overflow-x: hidden;
    }
    #shopMenuContent {
        display: flex;
        flex-direction: row;
        justify-content: flex-start;
        align-items: center;
        width: 100%;
        overflow-x: auto;
        padding: 20px;
        box-sizing: border-box;
    }
    .skinCard {
        width: 200px;
        margin-right: 20px;
        text-align: center;
    }
    .skinCard img {
        width: 150px;
        height: 150px;
        margin-bottom: 10px;
    }
    .skinCard button {
        margin-top: 10px;
        padding: 5px 10px;
        font-size: 16px;
        cursor: pointer;
    }
    #selectedSkin {
        width: 100%;
        text-align: center;
        margin-top: 20px;
        display: none;
    }
    #selectedSkin img {
        width: 200px;
        height: 200px;
    }
</style>
</head>
<body>
<canvas id="gameCanvas"></canvas>
<div id="mainMenu">
    <h1>Roman.io</h1>
    <button id="playButton">Играть</button>
    <button id="clickerButton">Кликер</button>
    <button id="shopButton">Магазин</button>
    <div id="mainMenuScore">Счётчик кликов из кликера: <span id="mainMenuClickerScore">0</span></div>
</div>
<div id="score">Score: <span id="scoreValue">0</span></div>
<div id="clickerMenu" style="display: none;">
    <div id="backButton">⬅</div>
    <div id="clickerCounter">Клики: <span id="clickerScore">0</span></div>
    <img id="clickerImage" src="dadasereza.png" alt="Clicker Image">
</div>
<div id="shopMenu" style="display: none;">
    <div id="backButtonShop">⬅</div>
    <div id="shopMenuContent">
        <div class="skinCard" id="skin1">
            <img src="dadasereza2.png" alt="Skin 1">
            <p>Злой дядя Серёжа</p>
            <p>Цена: 50 кликов</p>
            <button class="buyButton" data-skin-id="1">Купить</button>
            <button class="selectButton" data-skin-id="1" style="display: none;">Выбрать</button>
        </div>
        <div class="skinCard" id="skin2">
            <img src="dadasereza3.png" alt="Skin 2">
            <p>Стрёмный дядя Серёжа</p>
            <p>Цена: 100 кликов</p>
            <button class="buyButton" data-skin-id="2">Купить</button>
            <button class="selectButton" data-skin-id="2" style="display: none;">Выбрать</button>
        </div>
        <div class="skinCard" id="skin3">
            <img src="dadasereza4.png" alt="Skin 3">
            <p>Жмых дядя Серёжа</p>
            <p>Цена: 500 кликов</p>
            <button class="buyButton" data-skin-id="3">Купить</button>
            <button class="selectButton" data-skin-id="3" style="display: none;">Выбрать</button>
        </div>
        <div class="skinCard" id="skin4">
            <img src="dadasereza.png" alt="Skin 4">
            <p>Основной</p>
            <p>Цена: Бесплатно</p>
            <button class="selectButton" data-skin-id="4">Выбрать</button>
        </div>
    </div>
</div>
<div id="selectedSkin">
    <h2>Выбранный скин</h2>
    <img id="selectedSkinImage" src="" alt="Selected Skin">
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
    // Весь ваш JavaScript-код, включая назначение обработчиков событий, должен быть здесь
    const playButton = document.getElementById('playButton');
    const clickerButton = document.getElementById('clickerButton');
    const shopButton = document.getElementById('shopButton');
    const mainMenu = document.getElementById('mainMenu');
    const clickerMenu = document.getElementById('clickerMenu');
    const shopMenu = document.getElementById('shopMenu');
    const backButton = document.getElementById('backButton');
    const backButtonShop = document.getElementById('backButtonShop');

    playButton.addEventListener('click', () => {
        inMainMenu = false;
        mainMenu.style.display = 'none';
        startGame();
    });

    clickerButton.addEventListener('click', () => {
        inMainMenu = false;
        mainMenu.style.display = 'none';
        clickerMenu.style.display = 'block';
    });

    shopButton.addEventListener('click', () => {
        inMainMenu = false;
        mainMenu.style.display = 'none';
        shopMenu.style.display = 'block';
        updateShopButtons();
    });

    backButton.addEventListener('click', () => {
        clickerMenu.style.display = 'none';
        mainMenu.style.display = 'flex';
        inMainMenu = true;
    });

    backButtonShop.addEventListener('click', () => {
        shopMenu.style.display = 'none';
        mainMenu.style.display = 'flex';
        inMainMenu = true;
    });

    // Остальной ваш код, связанный с игрой, покупкой скинов и т.д.
});


canvas.width = window.innerWidth;
canvas.height = window.innerHeight;

let inMainMenu = true;
let score = 0;
let clickerScore = getCookie('clickerScore') ? parseInt(getCookie('clickerScore')) : 0;
let selectedSkinId = getCookie('selectedSkinId') ? parseInt(getCookie('selectedSkinId')) : 4; // 4 is default skin (dadasereza.png)
let skinsOwned = getCookie('skinsOwned') ? JSON.parse(getCookie('skinsOwned')) : [4]; // Default: only the first skin is owned
mainMenuClickerScoreElement.textContent = clickerScore;

const player = {
    x: canvas.width / 2,
    y: canvas.height / 2,
    radius: 30,
    color: 'blue',
    image: new Image()
};

player.image.src = getSkinImage(selectedSkinId);

const bot = {
    x: Math.random() * canvas.width,
    y: Math.random() * canvas.height,
    radius: 30,
    color: 'red'
};

const small
balls = [];
let animationFrame;

function update() {
    ctx.clearRect(0, 0, canvas.width, canvas.height);

    ctx.beginPath();
    ctx.arc(player.x, player.y, player.radius, 0, Math.PI * 2);
    ctx.fillStyle = player.color;
    ctx.fill();

    ctx.beginPath();
    ctx.arc(bot.x, bot.y, bot.radius, 0, Math.PI * 2);
    ctx.fillStyle = bot.color;
    ctx.fill();

    smallBalls.forEach(ball => {
        ctx.beginPath();
        ctx.arc(ball.x, ball.y, ball.radius, 0, Math.PI * 2);
        ctx.fillStyle = ball.color;
        ctx.fill();
    });

    balls.forEach(ball => {
        ctx.beginPath();
        ctx.arc(ball.x, ball.y, ball.radius, 0, Math.PI * 2);
        ctx.fillStyle = ball.color;
        ctx.fill();

        ball.x += ball.velocity.x;
        ball.y += ball.velocity.y;

        // Collision detection with player
        if (distance(player.x, player.y, ball.x, ball.y) < player.radius + ball.radius) {
            score++;
            scoreElement.textContent = score;
            balls = balls.filter(b => b !== ball);
        }

        // Collision detection with bot
        if (distance(bot.x, bot.y, ball.x, ball.y) < bot.radius + ball.radius) {
            balls = balls.filter(b => b !== ball);
        }

        // Remove balls that go out of bounds
        if (ball.x + ball.radius < 0 || ball.x - ball.radius > canvas.width ||
            ball.y + ball.radius < 0 || ball.y - ball.radius > canvas.height) {
            balls = balls.filter(b => b !== ball);
        }
    });

    animationFrame = requestAnimationFrame(update);
}

function distance(x1, y1, x2, y2) {
    return Math.sqrt((x2 - x1) ** 2 + (y2 - y1) ** 2);
}

function getSkinImage(skinId) {
    switch (skinId) {
        case 1:
            return 'dadasereza2.png';
        case 2:
            return 'dadasereza3.png';
        case 3:
            return 'dadasereza4.png';
        case 4:
        default:
            return 'dadasereza.png';
    }
}

function buySkin(skinId, price) {
    if (clickerScore >= price && !skinsOwned.includes(skinId)) {
        clickerScore -= price;
        clickerScoreElement.textContent = clickerScore;
        skinsOwned.push(skinId);
        saveGame();
        updateShopButtons();
    }
}

function selectSkin(skinId) {
    selectedSkinId = skinId;
    player.image.src = getSkinImage(skinId);
    saveGame();
    updateShopButtons();
}

function updateShopButtons() {
    const buyButtons = document.querySelectorAll('.buyButton');
    const selectButtons = document.querySelectorAll('.selectButton');

    buyButtons.forEach(button => {
        const skinId = parseInt(button.getAttribute('data-skin-id'));
        const price = getSkinPrice(skinId);
        if (clickerScore < price || skinsOwned.includes(skinId)) {
            button.style.display = 'none';
        } else {
            button.style.display = 'block';
        }
    });

    selectButtons.forEach(button => {
        const skinId = parseInt(button.getAttribute('data-skin-id'));
        if (skinsOwned.includes(skinId)) {
            button.style.display = 'block';
            if (skinId === selectedSkinId) {
                button.textContent = 'Выбран';
                button.disabled = true;
            } else {
                button.textContent = 'Выбрать';
                button.disabled = false;
            }
        } else {
            button.style.display = 'none';
        }
    });

    if (selectedSkinId !== 4) {
        document.getElementById('selectedSkin').style.display = 'block';
        selectedSkinImage.src = player.image.src;
    } else {
        document.getElementById('selectedSkin').style.display = 'none';
    }
}

function getSkinPrice(skinId) {
    switch (skinId) {
        case 1:
            return 50;
        case 2:
            return 100;
        case 3:
            return 500;
        case 4:
        default:
            return 0;
    }
}

function saveGame() {
    document.cookie = `clickerScore=${clickerScore};expires=Fri, 31 Dec 9999 23:59:59 GMT`;
    document.cookie = `selectedSkinId=${selectedSkinId};expires=Fri, 31 Dec 9999 23:59:59 GMT`;
    document.cookie = `skinsOwned=${JSON.stringify(skinsOwned)};expires=Fri, 31 Dec 9999 23:59:59 GMT`;
}

function getCookie(cookieName) {
    const name = cookieName + "=";
    const decodedCookie = decodeURIComponent(document.cookie);
    const cookieArray = decodedCookie.split(';');
    for (let i = 0; i < cookieArray.length; i++) {
        let cookie = cookieArray[i];
        while (cookie.charAt(0) === ' ') {
            cookie = cookie.substring(1);
        }
        if (cookie.indexOf(name) === 0) {
            return cookie.substring(name.length, cookie.length);
        }
    }
    return "";
}

playButton.addEventListener('click', () => {
    inMainMenu = false;
    mainMenu.style.display = 'none';
    startGame();
});

clickerButton.addEventListener('click', () => {
    inMainMenu = false;
    mainMenu.style.display = 'none';
    clickerMenu.style.display = 'block';
});

shopButton.addEventListener('click', () => {
    inMainMenu = false;
    mainMenu.style.display = 'none';
    shopMenu.style.display = 'block';
    updateShopButtons();
});

backButton.addEventListener('click', () => {
    clickerMenu.style.display = 'none';
    mainMenu.style.display = 'flex';
    inMainMenu = true;
});

backButtonShop.addEventListener('click', () => {
    shopMenu.style.display = 'none';
    mainMenu.style.display = 'flex';
    inMainMenu = true;
});

shopMenuContent.addEventListener('click', (event) => {
    if (event.target.classList.contains('buyButton')) {
        const skinId = parseInt(event.target.getAttribute('data-skin-id'));
        const price = getSkinPrice(skinId);
        buySkin(skinId, price);
    } else if (event.target.classList.contains('selectButton')) {
        const skinId = parseInt(event.target.getAttribute('data-skin-id'));
        selectSkin(skinId);
    }
});

canvas.addEventListener('click', (event) => {
    if (!inMainMenu) {
        const newBall = {
            x: event.clientX,
            y: event.clientY,
            radius: 10,
            color: 'green',
            velocity: {
                x: (Math.random() - 0.5) * 8,
                y: (Math.random() - 0.5) * 8
            }
        };
        balls.push(newBall);
    }
});

function startGame() {
    update();
}

// Load initial game state
updateShopButtons();
</script>
</body>
</html>





